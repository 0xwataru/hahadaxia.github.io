(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{390:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("ol",{attrs:{start:"0"}},[a("li",[t._v("request + etree(xpath,re...)")]),t._v(" "),a("li",[t._v("selenium(xpath,css,re...)")])]),t._v(" "),a("ol",{attrs:{start:"0"}},[a("li",[t._v("requests")])]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" lxml "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" etree      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 导入xpath")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\nhtml "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建xpath对象")]),t._v("\ntree "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" etree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HTML"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取全部手机的li")]),t._v("\nphone_li "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//*[@id=\"J_goodsList\"]/ul/li'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ol",[a("li",[t._v("selenium之xpath过滤选择抓取")])]),t._v(" "),a("p",[t._v("思路：通过日期（如下面的xpath_data）来过滤自己想要的数据，再通过xpath_href来定位其他的元素，从而实现xpath过滤抓取组合数据。")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("    xpath_date =  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"/html/body/div[2]/div[1]/div[3]/ul/li/div[2]/div/span[contains(text(),'天前') or contains(text(),'小时前') or contains(text(),'昨天')]\"")]),t._v("\n\n    xpath_href = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"/html/body/div[2]/div[1]/div[3]/ul/li/div[2]/div/span[contains(text(),'天前') or contains(text(),'小时前') or contains(text(),'昨天')]/../../h3/a\"")]),t._v("\n\n    #对过滤日期\b采集日期\b和url进行拼接\n")])])]),a("ul",[a("li",[t._v("注意:")])]),t._v(" "),a("ol",[a("li",[t._v("selenium浏览器最小化模式下,模拟点击的方式有时候会失效")]),t._v(" "),a("li")])])},[],!1,null,null,null);s.default=e.exports}}]);